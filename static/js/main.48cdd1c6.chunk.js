(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{411:function(e,t,a){e.exports=a(754)},753:function(e,t,a){},754:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"forecast",function(){return h});var r={};a.r(r),a.d(r,"getForecast",function(){return b});var o={};a.r(o),a.d(o,"SET_SELECTED_CITY",function(){return E}),a.d(o,"SET_DATA",function(){return v}),a.d(o,"SET_LOADING",function(){return w}),a.d(o,"SET_ERROR",function(){return C}),a.d(o,"SET_FILTERING",function(){return O}),a.d(o,"loadCity",function(){return S}),a.d(o,"setSelectedCity",function(){return T}),a.d(o,"setData",function(){return j}),a.d(o,"setLoadingData",function(){return k}),a.d(o,"setFilteringData",function(){return D}),a.d(o,"TOGGLE_SIDEBAR",function(){return L}),a.d(o,"SET_SIDEBAR_COLLAPSED",function(){return N}),a.d(o,"toggleSidebar",function(){return R}),a.d(o,"setSidebarCollapsed",function(){return _});var i=a(1),l=a.n(i),c=a(28),s=a.n(c),d=a(101),u=a(183),m=a.n(u),p=(a(630),a(631),a(393)),f=a.n(p),h="".concat("https://api.openweathermap.org/data/2.5","/forecast"),g={openWeatherKey:"a6406e2d8df17080c159e36896fa1e1a"};function b(e){return f.a.get(n.forecast,{params:{id:e,appid:g.openWeatherKey,units:"metric"}})}var y,E="SET_SELECTED_CITY",v="SET_DATA",w="SET_LOADING",C="SET_ERROR",O="SET_FILTERING",S=function(e){return function(t,a){t(k(!0)),r.getForecast(e).then(function(e){t(j(e.data.list.map(function(e){return{date:new Date(e.dt_txt),value:e.main.temp,clouds:e.clouds.all}}))),t(T(e.data.city)),t(k(!1))}).catch(function(e){return t(I(e))})}},T=function(e){return function(t,a){t({type:E,payload:e})}},j=function(e){return function(t,a){t({type:v,payload:e})}},k=function(e){return function(t,a){t({type:w,payload:e})}},D=function(e){return function(t,a){t({type:O,payload:e})}},I=function(e){return function(t,a){t(k(!1)),u.toastr.error("Error!",e.message)}},L="TOGGLE_SIDEBAR",N="SET_SIDEBAR_COLLAPSED",R=function(){return function(e){e({type:L})}},_=function(e){return function(t){t({type:N,payload:e})}},x=a(102),A=a(143),F={selectedCity:{},data:[],loading:!1,filtering:!1},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(A.a)({},e,{selectedCity:t.payload});case v:return Object(A.a)({},e,{data:t.payload});case w:return Object(A.a)({},e,{loading:t.payload});case O:return Object(A.a)({},e,{filtering:t.payload});default:return e}},G={collapsed:!0},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(A.a)({},e,{collapsed:!e.collapsed});case N:return Object(A.a)({},e,{collapsed:t.payload});default:return e}},B=Object(x.c)({form:M,sidebar:W,toastr:u.reducer}),H=a(394),Y=Object(x.d)(B,Object(x.a)(H.a)),z=a(136),K=a(137),P=a(141),V=a(138),U=a(142),X=a(763),J=a(248),q=a(395),Q=a.n(q),Z=a(396),$=a.n(Z),ee=a(397),te=a.n(ee),ae=a(764),ne=a(759),re=a(403),oe=a(762),ie=(a(720),a(18)),le=a.n(ie),ce=X.a.Sider,se=window.cityList,de=function(e){function t(e){var a;return Object(z.a)(this,t),(a=Object(P.a)(this,Object(V.a)(t).call(this,e))).loadedRowsMap={},a.onClickCity=function(e){a.props.loading||(a.props.loadCity(e.id),a.props.toggleSidebar())},a.sidebarBreakpoint=function(e){console.log(e),a.props.setSidebarCollapsed(e)},a.handleChange=function(e){e.persist(),a.props.filtering||(a.setState(Object(J.a)({},e.target.name,e.target.value)),y&&clearTimeout(y),y=setTimeout(function(){a.props.setFilteringData(!0),a.state.filterWorker.postMessage({list:se,filter:e.target.value}),clearTimeout(y)},500))},a.workerResponse=function(e){a.setState({data:e.data.result}),a.props.setFilteringData(!1)},a.handleInfiniteOnLoad=function(e){var t=e.startIndex,n=e.stopIndex,r=a.state.data;a.setState({loading:!0});for(var o=t;o<=n;o++)a.loadedRowsMap[o]=1;if(r.length>19)return ae.a.warning("Virtualized List loaded all"),void a.setState({loading:!1});a.fetchData(function(e){r=r.concat(e.results),a.setState({data:r,loading:!1})})},a.isRowLoaded=function(e){var t=e.index;return!!a.loadedRowsMap[t]},a.renderItem=function(e){var t=e.index,n=e.key,r=e.style,o=a.state.data[t];return l.a.createElement(ne.a.Item,{key:n,style:r,className:"wm-sidebar-list-item",onClick:function(e){return a.onClickCity(o)}},"".concat(o.name," - ").concat(o.country))},a.state={filterValue:"",data:[]},a}return Object(U.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){var e=new Worker("webWorker.js");e.onmessage=this.workerResponse,console.log(se),this.setState({data:se,filterWorker:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.filtering,n=t.sidebarCollapsed,r=this.state.data;return console.log(n),l.a.createElement(ce,{theme:"dark",className:"wm-sider",breakpoint:"md",collapsedWidth:"0",onBreakpoint:this.sidebarBreakpoint,trigger:null,collapsible:!0,collapsed:n},l.a.createElement("div",{className:"wm-sidebar"},l.a.createElement("div",{className:"wm-sidebar-search"},l.a.createElement(oe.a,{size:"large",placeholder:"Start type city",name:"filterValue",value:this.state.filterValue,onChange:this.handleChange})),l.a.createElement("div",{ref:function(t){return e.scrollTarget=t},className:le()("wm-sidebar-list",{loading:a})},l.a.createElement(re.a,{spinning:a},l.a.createElement(ne.a,{size:"small",bordered:!0},l.a.createElement(Q.a,{scrollElement:this.scrollTarget},function(t){var a=t.height,n=t.isScrolling,o=t.onChildScroll,i=t.scrollTop;return l.a.createElement($.a,{disableHeight:!0},function(t){var c=t.width;return l.a.createElement(te.a,{autoHeight:!0,height:a,isScrolling:n,onScroll:o,overscanRowCount:2,rowCount:r.length,rowHeight:30,rowRenderer:e.renderItem,scrollTop:i,width:c})})}))))))}}]),t}(l.a.Component);var ue=Object(d.connect)(function(e){var t=e.form;return{sidebarCollapsed:e.sidebar.collapsed,filtering:t.filtering}},function(e){return Object(x.b)({loadCity:o.loadCity,setDisplayName:o.setDisplayName,setData:o.setData,setLoadingData:o.setLoadingData,setFilteringData:o.setFilteringData,toggleSidebar:o.toggleSidebar,setSidebarCollapsed:o.setSidebarCollapsed},e)})(de),me=a(760),pe=a(37),fe=X.a.Header,he=me.a.Title,ge=function(e){function t(){return Object(z.a)(this,t),Object(P.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedCity,a=e.sidebarCollapsed;return l.a.createElement(fe,{className:"wm-header"},l.a.createElement(pe.a,{className:"wm-header-trigger",type:a?"menu-unfold":"menu-fold",onClick:this.props.toggleSidebar}),l.a.createElement(he,{level:2,className:"wm-header-city",style:{margin:0}},t.name))}}]),t}(l.a.Component);var be=Object(d.connect)(function(e){var t=e.form,a=e.sidebar;return{selectedCity:t.selectedCity,sidebarCollapsed:a.collapsed}},function(e){return Object(x.b)({toggleSidebar:o.toggleSidebar},e)})(ge),ye=a(761),Ee=a(186),ve=a(765),we=(a(250),a(408)),Ce=a(310),Oe=a(145),Se=a(407),Te=a.n(Se);Ce.b(we.a);var je=X.a.Content,ke=ye.a.TabPane,De=me.a.Text,Ie=function(e){function t(){return Object(z.a)(this,t),Object(P.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(K.a)(t,[{key:"componentDidUpdate",value:function(e){Te.a.isEqual(e.data,this.props.data)||(this.chart?this.chart.data=this.props.data:this.generate())}},{key:"componentDidMount",value:function(){this.props.data.length&&this.generate()}},{key:"generate",value:function(){var e=Ce.a("amChart",Oe.d);e.paddingLeft=0,e.paddingLeft=0;var t=e.xAxes.push(new Oe.a);t.renderer.minGridDistance=120,t.baseInterval={timeUnit:"hour",count:3},t.dateFormats.setKey("hour","MMMM dd HH:mm");var a=e.yAxes.push(new Oe.c);a.tooltip.disabled=!0,a.renderer.minWidth=35;var n=e.series.push(new Oe.b);n.dataFields.dateX="date",n.dataFields.valueY="value",n.tooltipText="Temperature: {valueY.value} \xb0C";var r=e.series.push(new Oe.b);r.dataFields.dateX="date",r.dataFields.valueY="clouds",r.tooltipHTML="Clouds: {valueY.value}%",e.cursor=new Oe.f;var o=new Oe.e;o.series.push(n),e.scrollbarX=o,e.data=this.props.data,this.chart=e}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.loading,n=e.selectedCity;return console.log(n),l.a.createElement(je,{className:"wm-content"},l.a.createElement(re.a,{spinning:a,wrapperClassName:"wm-content-spinner"},l.a.createElement(ye.a,{defaultActiveKey:"1",className:"wm-content-tabs"},l.a.createElement(ke,{tab:"Info",key:"1",className:"wm-content-tab",forceRender:!0},t.length?l.a.createElement("div",{style:{width:"100%",height:"100%"}},l.a.createElement(ve.a,{bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1}},l.a.createElement(ve.a.Item,{label:"City"},n.name),l.a.createElement(ve.a.Item,{label:"Country"},n.country),l.a.createElement(ve.a.Item,{label:"Timezone"},n.name),l.a.createElement(ve.a.Item,{label:"Lat&Lon"},n.coord?"".concat(n.coord.lat,", ").concat(n.coord.lon):null))):l.a.createElement(Ee.a,{description:l.a.createElement(De,null,"Select city from list")})),l.a.createElement(ke,{tab:"Temperature",key:"2",className:"wm-content-tab",forceRender:!0},t.length?l.a.createElement("div",{className:"wm-graph"},l.a.createElement("div",{className:le()("wm-graph-wrapper")},l.a.createElement("div",{id:"amChart"}))):l.a.createElement(Ee.a,{description:l.a.createElement(De,null,"Select city from list")})))))}}]),t}(l.a.Component);var Le=Object(d.connect)(function(e){var t=e.form;return{data:t.data,selectedCity:t.selectedCity,loading:t.loading}})(Ie),Ne=function(e){function t(){return Object(z.a)(this,t),Object(P.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return l.a.createElement(X.a,{className:"wm-layout"},l.a.createElement(ue,null),l.a.createElement(X.a,{className:"wm-layout-content"},l.a.createElement(be,null),l.a.createElement(Le,null)))}}]),t}(l.a.Component);var Re=Object(d.connect)(function(e){return{loading:e.form.loading}})(Ne);a(753);s.a.render(l.a.createElement(d.Provider,{store:Y},l.a.createElement(Re,null),l.a.createElement(m.a,{timeOut:4e3,newestOnTop:!1,position:"bottom-right",transitionIn:"fadeIn",transitionOut:"fadeOut",closeOnToastrClick:!0})),document.getElementById("root"))}},[[411,1,3]]]);
//# sourceMappingURL=main.48cdd1c6.chunk.js.map