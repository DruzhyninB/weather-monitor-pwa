(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{411:function(e,t,a){e.exports=a(754)},753:function(e,t,a){},754:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"forecast",function(){return h});var r={};a.r(r),a.d(r,"getForecast",function(){return b});var o={};a.r(o),a.d(o,"SET_SELECTED_CITY",function(){return v}),a.d(o,"SET_DATA",function(){return y}),a.d(o,"SET_LOADING",function(){return w}),a.d(o,"SET_ERROR",function(){return E}),a.d(o,"SET_FILTERING",function(){return C}),a.d(o,"loadCity",function(){return O}),a.d(o,"setSelectedCity",function(){return S}),a.d(o,"setData",function(){return T}),a.d(o,"setLoadingData",function(){return j}),a.d(o,"setFilteringData",function(){return k}),a.d(o,"TOGGLE_SIDEBAR",function(){return I}),a.d(o,"SET_SIDEBAR_COLLAPSED",function(){return L}),a.d(o,"toggleSidebar",function(){return N}),a.d(o,"setSidebarCollapsed",function(){return R});var i=a(1),c=a.n(i),l=a(28),s=a.n(l),d=a(101),u=a(183),p=a.n(u),m=(a(630),a(631),a(393)),f=a.n(m),h="".concat("https://api.openweathermap.org/data/2.5","/forecast"),g={openWeatherKey:"a6406e2d8df17080c159e36896fa1e1a"};function b(e){return f.a.get(n.forecast,{params:{id:e,appid:g.openWeatherKey,units:"metric"}})}var v="SET_SELECTED_CITY",y="SET_DATA",w="SET_LOADING",E="SET_ERROR",C="SET_FILTERING",O=function(e){return function(t,a){t(j(!0)),r.getForecast(e).then(function(e){t(T(e.data.list.map(function(e){return{date:new Date(e.dt_txt),value:e.main.temp,clouds:e.clouds.all}}))),t(S(e.data.city)),t(j(!1))}).catch(function(e){return t(D(e))})}},S=function(e){return function(t,a){t({type:v,payload:e})}},T=function(e){return function(t,a){t({type:y,payload:e})}},j=function(e){return function(t,a){t({type:w,payload:e})}},k=function(e){return function(t,a){t({type:C,payload:e})}},D=function(e){return function(t,a){t(j(!1)),u.toastr.error("Error!",e.message)}},I="TOGGLE_SIDEBAR",L="SET_SIDEBAR_COLLAPSED",N=function(){return function(e){e({type:I})}},R=function(e){return function(t){t({type:L,payload:e})}},A=a(102),_=a(143),x={selectedCity:{},data:[],loading:!1,filtering:!1},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(_.a)({},e,{selectedCity:t.payload});case y:return Object(_.a)({},e,{data:t.payload});case w:return Object(_.a)({},e,{loading:t.payload});case C:return Object(_.a)({},e,{filtering:t.payload});default:return e}},F={collapsed:!0},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(_.a)({},e,{collapsed:!e.collapsed});case L:return Object(_.a)({},e,{collapsed:t.payload});default:return e}},B=Object(A.c)({form:W,sidebar:M,toastr:u.reducer}),G=a(394),H=Object(A.d)(B,Object(A.a)(G.a)),P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Y,z=a(136),K=a(137),V=a(141),X=a(138),J=a(142),q=a(763),$=a(248),Q=a(395),Z=a.n(Q),ee=a(396),te=a.n(ee),ae=a(397),ne=a.n(ae),re=a(764),oe=a(759),ie=a(403),ce=a(762),le=(a(720),a(18)),se=a.n(le),de=q.a.Sider,ue=window.cityList,pe=function(e){function t(e){var a;return Object(z.a)(this,t),(a=Object(V.a)(this,Object(X.a)(t).call(this,e))).loadedRowsMap={},a.onClickCity=function(e){a.props.loading||(a.props.loadCity(e.id),a.props.toggleSidebar())},a.sidebarBreakpoint=function(e){a.props.setSidebarCollapsed(e)},a.handleChange=function(e){e.persist(),a.props.filtering||(a.setState(Object($.a)({},e.target.name,e.target.value)),Y&&clearTimeout(Y),Y=setTimeout(function(){a.props.setFilteringData(!0),a.state.filterWorker.postMessage({list:ue,filter:e.target.value}),clearTimeout(Y)},500))},a.workerResponse=function(e){a.setState({data:e.data.result}),a.props.setFilteringData(!1)},a.handleInfiniteOnLoad=function(e){var t=e.startIndex,n=e.stopIndex,r=a.state.data;a.setState({loading:!0});for(var o=t;o<=n;o++)a.loadedRowsMap[o]=1;if(r.length>19)return re.a.warning("Virtualized List loaded all"),void a.setState({loading:!1});a.fetchData(function(e){r=r.concat(e.results),a.setState({data:r,loading:!1})})},a.isRowLoaded=function(e){var t=e.index;return!!a.loadedRowsMap[t]},a.renderItem=function(e){var t=e.index,n=e.key,r=e.style,o=a.state.data[t];return c.a.createElement(oe.a.Item,{key:n,style:r,className:"wm-sidebar-list-item",onClick:function(e){return a.onClickCity(o)}},"".concat(o.name," - ").concat(o.country))},a.state={filterValue:"",data:[]},a}return Object(J.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){var e=new Worker("webWorker.js");e.onmessage=this.workerResponse,this.setState({data:ue,filterWorker:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.filtering,n=t.sidebarCollapsed,r=this.state.data;return c.a.createElement(de,{theme:"dark",className:"wm-sider",breakpoint:"md",collapsedWidth:"0",onBreakpoint:this.sidebarBreakpoint,trigger:null,collapsible:!0,collapsed:n},c.a.createElement("div",{className:"wm-sidebar"},c.a.createElement("div",{className:"wm-sidebar-search"},c.a.createElement(ce.a,{size:"large",placeholder:"Start type city",name:"filterValue",value:this.state.filterValue,onChange:this.handleChange})),c.a.createElement("div",{ref:function(t){return e.scrollTarget=t},className:se()("wm-sidebar-list",{loading:a})},c.a.createElement(ie.a,{spinning:a},c.a.createElement(oe.a,{size:"small",bordered:!0},c.a.createElement(Z.a,{scrollElement:this.scrollTarget},function(t){var a=t.height,n=t.isScrolling,o=t.onChildScroll,i=t.scrollTop;return c.a.createElement(te.a,{disableHeight:!0},function(t){var l=t.width;return c.a.createElement(ne.a,{autoHeight:!0,height:a,isScrolling:n,onScroll:o,overscanRowCount:2,rowCount:r.length,rowHeight:30,rowRenderer:e.renderItem,scrollTop:i,width:l})})}))))))}}]),t}(c.a.Component);var me=Object(d.connect)(function(e){var t=e.form;return{sidebarCollapsed:e.sidebar.collapsed,filtering:t.filtering}},function(e){return Object(A.b)({loadCity:o.loadCity,setDisplayName:o.setDisplayName,setData:o.setData,setLoadingData:o.setLoadingData,setFilteringData:o.setFilteringData,toggleSidebar:o.toggleSidebar,setSidebarCollapsed:o.setSidebarCollapsed},e)})(pe),fe=a(760),he=a(37),ge=q.a.Header,be=fe.a.Title,ve=function(e){function t(){return Object(z.a)(this,t),Object(V.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectedCity,a=e.sidebarCollapsed;return c.a.createElement(ge,{className:"wm-header"},c.a.createElement(he.a,{className:"wm-header-trigger",type:a?"menu-unfold":"menu-fold",onClick:this.props.toggleSidebar}),c.a.createElement(be,{level:2,className:"wm-header-city",style:{margin:0}},t.name))}}]),t}(c.a.Component);var ye=Object(d.connect)(function(e){var t=e.form,a=e.sidebar;return{selectedCity:t.selectedCity,sidebarCollapsed:a.collapsed}},function(e){return Object(A.b)({toggleSidebar:o.toggleSidebar},e)})(ve),we=a(761),Ee=a(186),Ce=a(765),Oe=a(408),Se=a(310),Te=a(145),je=a(407),ke=a.n(je);Se.b(Oe.a);var De=q.a.Content,Ie=we.a.TabPane,Le=fe.a.Text,Ne=function(e){function t(){return Object(z.a)(this,t),Object(V.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(K.a)(t,[{key:"componentDidUpdate",value:function(e){ke.a.isEqual(e.data,this.props.data)||(this.chart?this.chart.data=this.props.data:this.generate())}},{key:"componentDidMount",value:function(){this.props.data.length&&this.generate()}},{key:"generate",value:function(){var e=Se.a("amChart",Te.d);e.paddingLeft=0,e.paddingLeft=0;var t=e.xAxes.push(new Te.a);t.renderer.minGridDistance=120,t.baseInterval={timeUnit:"hour",count:3},t.dateFormats.setKey("hour","MMMM dd HH:mm");var a=e.yAxes.push(new Te.c);a.tooltip.disabled=!0,a.renderer.minWidth=35;var n=e.series.push(new Te.b);n.dataFields.dateX="date",n.dataFields.valueY="value",n.tooltipText="Temperature: {valueY.value} \xb0C";var r=e.series.push(new Te.b);r.dataFields.dateX="date",r.dataFields.valueY="clouds",r.tooltipHTML="Clouds: {valueY.value}%",e.cursor=new Te.f;var o=new Te.e;o.series.push(n),e.scrollbarX=o,e.data=this.props.data,this.chart=e}},{key:"componentWillUnmount",value:function(){this.chart&&this.chart.dispose()}},{key:"render",value:function(){var e=this.props,t=e.data,a=e.loading,n=e.selectedCity;return c.a.createElement(De,{className:"wm-content"},c.a.createElement(ie.a,{spinning:a,wrapperClassName:"wm-content-spinner"},c.a.createElement(we.a,{defaultActiveKey:"1",className:"wm-content-tabs"},c.a.createElement(Ie,{tab:"Info",key:"1",className:"wm-content-tab",forceRender:!0},t.length?c.a.createElement("div",{style:{width:"100%",height:"100%"}},c.a.createElement(Ce.a,{bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1}},c.a.createElement(Ce.a.Item,{label:"City"},n.name),c.a.createElement(Ce.a.Item,{label:"Country"},n.country),c.a.createElement(Ce.a.Item,{label:"Timezone"},n.name),c.a.createElement(Ce.a.Item,{label:"Lat&Lon"},n.coord?"".concat(n.coord.lat,", ").concat(n.coord.lon):null))):c.a.createElement(Ee.a,{description:c.a.createElement(Le,null,"Select city from list")})),c.a.createElement(Ie,{tab:"Temperature",key:"2",className:"wm-content-tab",forceRender:!0},t.length?c.a.createElement("div",{className:"wm-graph"},c.a.createElement("div",{className:se()("wm-graph-wrapper")},c.a.createElement("div",{id:"amChart"}))):c.a.createElement(Ee.a,{description:c.a.createElement(Le,null,"Select city from list")})))))}}]),t}(c.a.Component);var Re=Object(d.connect)(function(e){var t=e.form;return{data:t.data,selectedCity:t.selectedCity,loading:t.loading}})(Ne),Ae=function(e){function t(){return Object(z.a)(this,t),Object(V.a)(this,Object(X.a)(t).apply(this,arguments))}return Object(J.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return c.a.createElement(q.a,{className:"wm-layout"},c.a.createElement(me,null),c.a.createElement(q.a,{className:"wm-layout-content"},c.a.createElement(ye,null),c.a.createElement(Re,null)))}}]),t}(c.a.Component);var _e=Object(d.connect)(function(e){return{loading:e.form.loading}})(Ae);a(753);s.a.render(c.a.createElement(d.Provider,{store:H},c.a.createElement(_e,null),c.a.createElement(p.a,{timeOut:4e3,newestOnTop:!1,position:"bottom-right",transitionIn:"fadeIn",transitionOut:"fadeOut",closeOnToastrClick:!0})),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/weather-monitor-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/weather-monitor-pwa","/service-worker.js");P?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):U(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):U(t,e)})}}()}},[[411,1,3]]]);
//# sourceMappingURL=main.6f6f5969.chunk.js.map